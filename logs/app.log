{"asctime": "2025-11-07 14:49:53,800", "levelname": "ERROR", "name": "kidney_app", "message": "Error processing alert: 415 Unsupported Media Type: Did not attempt to load JSON data because the request Content-Type was not 'application/json'.", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\Victus\\Desktop\\MY-PROJECT\\kidney\\app\\routes\\dos_routes.py\", line 22, in alert\n    data = request.get_json()\n  File \"C:\\Users\\Victus\\Desktop\\MY-PROJECT\\kidney\\venv\\Lib\\site-packages\\werkzeug\\wrappers\\request.py\", line 604, in get_json\n    return self.on_json_loading_failed(None)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"C:\\Users\\Victus\\Desktop\\MY-PROJECT\\kidney\\venv\\Lib\\site-packages\\flask\\wrappers.py\", line 214, in on_json_loading_failed\n    return super().on_json_loading_failed(e)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^\n  File \"C:\\Users\\Victus\\Desktop\\MY-PROJECT\\kidney\\venv\\Lib\\site-packages\\werkzeug\\wrappers\\request.py\", line 647, in on_json_loading_failed\n    raise UnsupportedMediaType(\n    ...<2 lines>...\n    )\nwerkzeug.exceptions.UnsupportedMediaType: 415 Unsupported Media Type: Did not attempt to load JSON data because the request Content-Type was not 'application/json'."}
{"asctime": "2025-11-07 14:50:14,542", "levelname": "INFO", "name": "kidney_app", "message": "Received alert: {\"receiver\": \"webhook-group\", \"status\": \"firing\", \"alerts\": [{\"status\": \"firing\", \"labels\": {\"alertname\": \"IPRequestSpike\", \"ip\": \"203.0.113.45\"}, \"annotations\": {\"summary\": \"High requests\", \"description\": \"203.0.113.45 > 500 req/5m\"}}, {\"status\": \"firing\", \"labels\": {\"alertname\": \"IPRequestSpike\", \"ip\": \"198.51.100.12\"}, \"annotations\": {\"summary\": \"High requests\", \"description\": \"198.51.100.12 > 500 req/5m\"}}]}"}
{"asctime": "2025-11-07 14:50:14,543", "levelname": "ERROR", "name": "kidney_app", "message": "Error processing alert: name 'BLOCK_SCRIPT' is not defined", "exc_info": "Traceback (most recent call last):\n  File \"C:\\Users\\Victus\\Desktop\\MY-PROJECT\\kidney\\app\\routes\\dos_routes.py\", line 42, in alert\n    ok = block_ip(ip, reason)\n  File \"C:\\Users\\Victus\\Desktop\\MY-PROJECT\\kidney\\app\\services\\send_message_wa.py\", line 50, in block_ip\n    subprocess.check_call([\"sudo\", BLOCK_SCRIPT, ip, str(BAN_DURATION), reason])\n                                   ^^^^^^^^^^^^\nNameError: name 'BLOCK_SCRIPT' is not defined"}
